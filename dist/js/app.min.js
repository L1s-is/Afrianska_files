(()=>{"use strict";function e(e,t){e.classList.add(t)}function t(e,t){e.classList.remove(t)}function n(e,t){e.setCustomValidity(t)}const o=document.querySelector(".form__box"),r=o.querySelector(".work__form"),c=document.querySelector(".work__button"),i=document.querySelector("body"),s=document.querySelector(".nav__list");function l(){t(i,"not-scroll"),e(o,"hidden"),document.removeEventListener("click",onClickCloseFormNotBtn)}let d=document.querySelector(".error"),a=document.querySelector(".success");function u(){a.classList.add("hidden"),t(i,"not-scroll")}function m(){d.classList.add("hidden")}!function(){const n=r.querySelector(".btn--close"),d=document.querySelector(".menu__btn");function a(e){let t=e.target;if(t!==c){let e=t===r||r.contains(t),n=o.classList.contains("hidden");e||n||l()}}c.addEventListener("click",(function(){t(o,"hidden"),e(i,"not-scroll"),document.addEventListener("click",a),n.addEventListener("click",l)})),d.addEventListener("click",(function(){s.classList.toggle("open"),i.classList.toggle("not-scroll"),document.addEventListener("click",(function e(n){let o=n.target;if(o!==d){let n=o===(s||s.contains(o)),r=s.classList.contains("open");n||r||(t(i,"not-scroll"),t(s,"open"),document.removeEventListener("click",e))}}))}))}(),function(){const o=document.querySelector(".form__box").querySelector(".work__form"),r=o.querySelector(".form__btn"),c=document.querySelector("#name"),s=document.querySelector("#email");function f(e,t){e.style.borderColor=t}function v(o){let r=o.value.replace(/ +/g," ").trim();f(o,"red"),r?r.length<o.minLength?n(o,`The field can contain at least ${o.minLength} characters. Entered ${r.length} characters.`):r.length>o.maxLength?n(o,`The field can contain no more than ${o.maxLength} characters. Entered ${r.length} characters.`):(n(o,""),t(o,"ad-form__element--error"),f(o,"green")):(e(o,"ad-form__element--error"),n(o,"Please, fill the field"))}const L=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;function h(){var e;s.value?(e=s.value,L.test(e)?(n(s,""),t(s,"ad-form__element--error"),f(s,"green")):(n(s,"The field must contain an entry like example@mail.com"),f(s,"red"))):(n(s,"The field cannot be empty"),f(s,"red"))}function y(){e(s,"ad-form__element--error"),h()}function _(){e(c,"ad-form__element--error"),v(c)}function g(e){e.value||n(e,"The field cannot be empty"),c.addEventListener("invalid",_),s.addEventListener("invalid",y)}s.addEventListener("input",h),c.addEventListener("input",v),r.addEventListener("click",(()=>{return(e=c).addEventListener("input",(()=>v(e))),void e.addEventListener("invalid",(()=>v(e)));var e})),g(c),g(s),o.addEventListener("submit",(function(n){y(),_(),function(n,o,r){let c=new XMLHttpRequest;c.responseType="json",c.addEventListener("load",(function(){200===c.status?(r(),function(){t(a,"hidden");let n=document.querySelector(".button--success");e(i,"not-scroll"),n.addEventListener("click",u),setTimeout(u,5e3)}()):(d.querySelector(".error__message").textContent="message not sent, please try again later",t(d,"hidden"),d.querySelector("button").addEventListener("click",m),setTimeout(m,3e3))})),c.open("Post",n),c.send(o)}("https://echo.htmlacademy.ru",new FormData(o),l),o.reset(),c.style="none",s.style="none",g(c),g(s),n.preventDefault()}))}()})();