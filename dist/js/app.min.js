(()=>{"use strict";function e(e,t){e.classList.add(t)}function t(e,t){e.classList.remove(t)}function n(e,t){e.setCustomValidity(t)}const o=document.querySelector(".form__box"),r=o.querySelector(".work__form"),c=document.querySelector(".work__button"),i=document.querySelector("body"),s=document.querySelector(".nav__list"),l=r.querySelector(".btn--close");function d(){t(o,"hidden"),e(i,"not-scroll"),document.addEventListener("click",u),l.addEventListener("click",a)}function a(){t(i,"not-scroll"),e(o,"hidden"),document.removeEventListener("click",u)}function u(e){let t=e.target;if(t!==c){let e=t===r||r.contains(t),n=o.classList.contains("hidden");e||n||a()}}let m=document.querySelector(".error"),f=document.querySelector(".success");function v(){f.classList.add("hidden"),t(i,"not-scroll")}function L(){m.classList.add("hidden")}!function(){const e=document.querySelector(".menu__btn");c.addEventListener("click",d),e.addEventListener("click",(function(){s.classList.toggle("open"),i.classList.toggle("not-scroll"),document.addEventListener("click",(function n(o){let r=o.target;if(r!==e){let e=r===(s||s.contains(r)),o=s.classList.contains("open");e||o||(t(i,"not-scroll"),t(s,"open"),document.removeEventListener("click",n))}}))}))}(),function(){const o=document.querySelector(".form__box").querySelector(".work__form"),r=o.querySelector(".form__btn"),c=document.querySelector("#name"),s=document.querySelector("#email");function l(e,t){e.style.borderColor=t}function d(o){let r=o.value.replace(/ +/g," ").trim();l(o,"red"),r?r.length<o.minLength?n(o,`The field can contain at least ${o.minLength} characters. Entered ${r.length} characters.`):r.length>o.maxLength?n(o,`The field can contain no more than ${o.maxLength} characters. Entered ${r.length} characters.`):(n(o,""),t(o,"ad-form__element--error"),l(o,"green")):(e(o,"ad-form__element--error"),n(o,"Please, fill the field"))}const u=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;function h(){var e;s.value?(e=s.value,u.test(e)?(n(s,""),t(s,"ad-form__element--error"),l(s,"green")):(n(s,"The field must contain an entry like example@mail.com"),l(s,"red"))):(n(s,"The field cannot be empty"),l(s,"red"))}function y(){e(s,"ad-form__element--error"),h()}function _(){e(c,"ad-form__element--error"),d(c)}function g(e){e.value||n(e,"The field cannot be empty"),c.addEventListener("invalid",_),s.addEventListener("invalid",y)}s.addEventListener("input",h),c.addEventListener("input",d),r.addEventListener("click",(()=>{return(e=c).addEventListener("input",(()=>d(e))),void e.addEventListener("invalid",(()=>d(e)));var e})),g(c),g(s),o.addEventListener("submit",(function(n){y(),_(),function(n,o,r){let c=new XMLHttpRequest;c.responseType="json",c.addEventListener("load",(function(){200===c.status?(r(),function(){t(f,"hidden");let n=document.querySelector(".button--success");e(i,"not-scroll"),n.addEventListener("click",v),setTimeout(v,5e3)}()):(m.querySelector(".error__message").textContent="message not sent, please try again later",t(m,"hidden"),m.querySelector("button").addEventListener("click",L),setTimeout(L,3e3))})),c.open("Post",n),c.send(o)}("https://echo.htmlacademy.ru",new FormData(o),a),o.reset(),c.style="none",s.style="none",g(c),g(s),n.preventDefault()}))}()})();